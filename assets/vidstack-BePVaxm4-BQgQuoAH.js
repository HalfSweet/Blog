var y=Object.defineProperty;var w=(i,t,s)=>t in i?y(i,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):i[t]=s;var l=(i,t,s)=>(w(i,typeof t!="symbol"?t+"":t,s),s),u=(i,t,s)=>{if(!t.has(i))throw TypeError("Cannot "+s)};var e=(i,t,s)=>(u(i,t,"read from private field"),s?s.call(i):t.get(i)),o=(i,t,s)=>{if(t.has(i))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(i):t.set(i,s)},p=(i,t,s,a)=>(u(i,t,"write to private field"),a?a.call(i,s):t.set(i,s),s);var d=(i,t,s)=>(u(i,t,"access private method"),s);import{s as M,l as f,t as A,p as P,ad as O,k as S}from"./vidstack-Ds_q5BGO-BmIdNEue.js";var r,n,b,c,m;class k{constructor(t){o(this,n);o(this,c);o(this,r,void 0);l(this,"src",M(""));l(this,"referrerPolicy",null);p(this,r,t),t.setAttribute("frameBorder","0"),t.setAttribute("aria-hidden","true"),t.setAttribute("allow","autoplay; fullscreen; encrypted-media; picture-in-picture; accelerometer; gyroscope"),this.referrerPolicy!==null&&t.setAttribute("referrerpolicy",this.referrerPolicy)}get iframe(){return e(this,r)}setup(){f(window,"message",d(this,c,m).bind(this)),f(e(this,r),"load",this.onLoad.bind(this)),A(d(this,n,b).bind(this))}postMessage(t,s){var a;(a=e(this,r).contentWindow)==null||a.postMessage(JSON.stringify(t),s??"*")}}r=new WeakMap,n=new WeakSet,b=function(){const t=this.src();if(!t.length){e(this,r).setAttribute("src","");return}const s=P(()=>this.buildParams());e(this,r).setAttribute("src",O(t,s))},c=new WeakSet,m=function(t){var g;const s=this.getOrigin();if((t.source===null||t.source===((g=e(this,r))==null?void 0:g.contentWindow))&&(!S(s)||s===t.origin)){try{const h=JSON.parse(t.data);h&&this.onMessage(h,t);return}catch{}t.data&&this.onMessage(t.data,t)}};export{k as E};
