var M=Object.defineProperty;var x=i=>{throw TypeError(i)};var T=(i,n,t)=>n in i?M(i,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[n]=t;var g=(i,n,t)=>T(i,typeof n!="symbol"?n+"":n,t),b=(i,n,t)=>n.has(i)||x("Cannot "+t);var o=(i,n,t)=>(b(i,n,"read from private field"),t?t.call(i):n.get(i)),u=(i,n,t)=>n.has(i)?x("Cannot add the same private member more than once"):n instanceof WeakSet?n.add(i):n.set(i,t),f=(i,n,t,e)=>(b(i,n,"write to private field"),e?e.call(i,t):n.set(i,t),t),r=(i,n,t)=>(b(i,n,"access private method"),t);import{C as j,a4 as k,u as q,l as c,a6 as z,aK as B,y as m,a5 as D,S as F}from"./app-ZjGoAAr9.js";var h,s,C,E,y,H,N,$,S,v,w,I,L,K;class O extends j{constructor(){super(...arguments);u(this,s);u(this,h);u(this,$,"")}onSetup(){f(this,h,q()),r(this,s,S).call(this),r(this,s,v).call(this),r(this,s,w).call(this),r(this,s,y).call(this)}onAttach(t){t.style.setProperty("pointer-events","none"),c(r(this,s,N).bind(this)),c(r(this,s,S).bind(this)),c(r(this,s,v).bind(this)),c(r(this,s,w).bind(this)),c(r(this,s,y).bind(this));const{started:e}=o(this,h).$state;this.setAttributes({"data-visible":()=>!e()&&!this.$state.hidden(),"data-loading":r(this,s,H).bind(this),"data-error":r(this,s,C).bind(this),"data-hidden":this.$state.hidden})}onConnect(t){c(r(this,s,E).bind(this)),c(r(this,s,I).bind(this))}}h=new WeakMap,s=new WeakSet,C=function(){const{error:t}=this.$state;return!z(t())},E=function(){const{canLoadPoster:t,poster:e}=o(this,h).$state;!t()&&e()&&B(e(),"preconnect")},y=function(){const{src:t}=this.$props,{poster:e,nativeControls:a}=o(this,h).$state;this.el&&m(this.el,"display",a()?"none":null),this.$state.hidden.set(r(this,s,C).call(this)||!(t()||e())||a())},H=function(){const{loading:t,hidden:e}=this.$state;return!e()&&t()},N=function(){const t=this.$state.img();t&&(new D(t).add("load",r(this,s,L).bind(this)).add("error",r(this,s,K).bind(this)),t.complete&&r(this,s,L).call(this))},$=new WeakMap,S=function(){const{poster:t}=o(this,h).$props,{canLoadPoster:e,providedPoster:a,inferredPoster:p}=o(this,h).$state,d=this.$props.src()||"",P=d||t()||p();o(this,$)===a()&&a.set(d),this.$state.src.set(e()&&P.length?P:null),f(this,$,d)},v=function(){const{src:t}=this.$props,{alt:e}=this.$state,{poster:a}=o(this,h).$state;e.set(t()||a()?this.$props.alt():null)},w=function(){const{crossOrigin:t}=this.$props,{crossOrigin:e}=this.$state,{crossOrigin:a,poster:p}=o(this,h).$state,d=t()!==null?t():a();e.set(/ytimg\.com|vimeo/.test(p()||"")?null:d===!0?"anonymous":d)},I=function(){const{loading:t,error:e}=this.$state,{canLoadPoster:a,poster:p}=o(this,h).$state;t.set(a()&&!!p()),e.set(null)},L=function(){const{loading:t,error:e}=this.$state;t.set(!1),e.set(null)},K=function(t){const{loading:e,error:a}=this.$state;e.set(!1),a.set(t)},g(O,"props",{src:null,alt:null,crossOrigin:null}),g(O,"state",new k({img:null,src:null,alt:null,crossOrigin:null,loading:!0,error:null,hidden:!1}));var l;class A extends F(HTMLElement,O){constructor(){super(...arguments);u(this,l,document.createElement("img"))}onSetup(){this.$state.img.set(o(this,l))}onConnect(){const{src:t,alt:e,crossOrigin:a}=this.$state;c(()=>{const{loading:p,hidden:d}=this.$state;o(this,l).style.display=p()||d()?"none":""}),c(()=>{m(o(this,l),"alt",e()),m(o(this,l),"crossorigin",a()),m(o(this,l),"src",t())}),o(this,l).parentNode!==this&&this.prepend(o(this,l))}}l=new WeakMap,g(A,"tagName","media-poster"),g(A,"attrs",{crossOrigin:"crossorigin"});export{A as MediaPosterElement};
